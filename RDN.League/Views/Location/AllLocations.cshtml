@using RDN.League.Models.Location
@using RDN.League.Models.Utilities
@model List<RDN.Portable.Classes.Location.Location>
@{
    ViewBag.Title = "All Locations";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section SecondNav{

    <nav class="navbar navbar-default navbar-lower" style="margin-bottom:0px;" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#secondNavBar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

            </div>
            <div class="collapse navbar-collapse collapse-buttons" id="secondNavBar">
                <div class="navbar-form navbar-left" role="search">
                    <a title="New Location" href="#" class="btn btn-default btn-sm"> New Location</a>
                </div>
            </div>
        </div>
    </nav>
}

<ol class="breadcrumb">
    <li><a href="@RDN.Utilities.Config.ConfigManager.InternalSite">Home</a></li>
        <li class="active">Locations</li>
</ol>

<div class="col-md-offset-1  col-md-10  col-xs-12">
    <h2 class="text-center">
        Locations
    </h2>
</div>
<div class="col-md-offset-1 col-md-10 col-xs-12">
    <div class="panel panel-default">
        <div class="panel-body">

            <table class="table table-hover table-striped ">
                <thead>
                    <tr>
                        <th class="tht">Location Name</th>
                        <th class="tht">Address</th>
                        <th class="tht">Delete</th>
                    </tr>
                </thead>
                @foreach (var loc in Model)
                {
                    <tr>
                        <td>
                            @loc.LocationName
                        </td>
                        <td>
                            @if (loc.Contact != null && loc.Contact.Addresses.FirstOrDefault() != null)
                            {
                                var a = loc.Contact.Addresses.FirstOrDefault();
                                @a.Address1<br />
                                if (!String.IsNullOrEmpty(a.Address2))
                                {
                                    @a.Address2<br />
                                }
                                if (!String.IsNullOrEmpty(a.CityRaw))
                                {
                                    @a.CityRaw<span>,</span>}
                                if (!String.IsNullOrEmpty(a.StateRaw))
                                {
                                    @a.StateRaw
                                }
                                if (!String.IsNullOrEmpty(a.Zip))
                                {
                                    @a.Zip
                                }
                                if (!String.IsNullOrEmpty(a.Country))
                                {
                                    <br />@a.Country
                                }
                            }

                        </td>
                        <td>
                            <span class="btn btn-danger" onclick="Locations.RemoveLocation(this,'@loc.LocationId')">Delete</span>
                        </td>
                    </tr>

                }
            </table>

        </div>
    </div>
</div>

