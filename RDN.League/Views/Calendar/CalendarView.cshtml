@using RDN.Library.Classes.Calendar;
@using RDN.Library.Classes.Calendar.Enums;
@using RDN.Library.Cache;
@model RDN.Portable.Classes.Controls.Calendar.Calendar
@{
    ViewBag.Title = "Calendar for " + Model.EntityName;
    Layout = "~/Views/Shared/_Layout.cshtml";
    var memId = RDN.Library.Classes.Account.User.GetMemberId();
    var isSec = MemberCache.IsSecretaryOrBetterOfLeague(memId);
    bool isEventsCourd = MemberCache.IsEventsCourdinatorOrBetterOfLeague(memId);
    var isAttendance = MemberCache.IsAttendanceManager(memId);
}

<ol class="breadcrumb">
    <li><a href="@RDN.Library.Classes.Config.LibraryConfig.InternalSite">Home</a></li>
    <li class="active">Calendar</li>
</ol>

@if (Model.CalendarId == new Guid())
{
    <div class="fixedContainer">
        <div class="fixedCenterContainter">
            <div class="fixTitle">
                Calendar Setup
            </div>
            <div class="divider"></div>

            <div>
                It looks like your calendar has not yet been created. Go ahead and create one so
                you can start scheduling events and tracking attendance! This calendar will be open
                to all your members!
            </div>
            @using (Html.BeginForm("CreateCalendar", "Calendar"))
            {
                <div>
                    <input type="submit" class="primary" value="Create Calendar" />
                </div>
                @Html.HiddenFor(x => x.OwnerEntity);
            }
        </div>
    </div>
}
else
{
    <div class="panel panel-default margin-top-20">
        <div class="panel-heading">
            @if (isSec || isAttendance || isEventsCourd)
            {
                <a class="btn btn-default btn-sm" title="New Event" href="@Url.Content("~/calendar/new/" + @Model.OwnerEntity + "/" + @Model.CalendarId.ToString().Replace("-", ""))">
                    <i class="fa fa-plus "></i> New
                </a>
            }
            <a class="btn btn-default btn-sm" title="Calendar" href="@Url.Content("~/calendar/" + @Model.OwnerEntity + "/" + @Model.CalendarId.ToString().Replace("-", ""))">
                <i class="fa fa-list-ul"></i> List
            </a>
            @if (isSec || isAttendance || isEventsCourd)
            {

                <a class="btn btn-default btn-sm" title="Import Calendar" href="@Url.Content("~/calendar/import/" + @Model.OwnerEntity + "/" + @Model.CalendarId.ToString().Replace("-", ""))">
                    <span class="glyphicon glyphicon-import " aria-hidden="true"></span>  Import
                </a>
                <a class="btn btn-default btn-sm" title="Calendar Settings" href="@Url.Content("~/calendar/settings/" + @Model.OwnerEntity + "/" + @Model.CalendarId.ToString().Replace("-", ""))">
                    <i class="fa fa-cogs "></i> Settings
                </a>

            }
            <a class="btn btn-default btn-sm" title="Run Report" href="@Url.Content("~/calendar/reports/" + @Model.OwnerEntity + "/" + @Model.CalendarId.ToString().Replace("-", ""))">
                <span class="glyphicon glyphicon-list-alt " aria-hidden="true"></span> Report
            </a>
        </div>
        <div class="panel-body">
            <div id="calendar">
            </div>
        </div>
    </div>
    <div class="divEventDetail" style="display:none;">
        <div class="row">
            <div class="col-xs-12">
                <div class="margin-bottom-5 display-none">
                    <h5 class="b no-margin">Location:</h5>
                    <div class="divLocation"></div>
                </div>
                <div class="margin-bottom-5 display-none">
                    <h5 class="b no-margin">Descript:</h5>
                    <div class="divDescription"></div>
                </div>
            </div>
        </div>
    </div>
    <script type='text/javascript'>
        $(document).ready(function () { Calendar.InitializeCalenderLarger('@Model.OwnerEntity','@Model.CalendarId.ToString().Replace("-", "")'); });
    </script>
}
