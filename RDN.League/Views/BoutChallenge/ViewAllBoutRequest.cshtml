@model List<RDN.Library.Classes.League.BoutList>
@{
    ViewBag.Title = "All Game Challenge Request";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var memId = RDN.Library.Classes.Account.User.GetMemberId();
    bool isAdminOfLeague = RDN.Library.Cache.MemberCache.IsSecretaryOrBetterOfLeague(memId);
    Guid leagueId = RDN.Library.Cache.MemberCache.GetLeagueIdOfMember(memId);
    
}

<ol class="breadcrumb">
    <li><a href="@RDN.Utilities.Config.ConfigManager.InternalSite">Home</a></li>
    <li class="active">Game Challenges</li>
</ol>

<div class="panel panel-default">
    <div class="panel-heading">
        <div class="row">
            <div class="col-xs-6">
                <h3 class="margin-bottom-10 margin-top-5"><i class="fa fa-thumbs-up"></i> Game Challenges</h3>
            </div>
            <div class="col-xs-6 text-right">
                @if (isAdminOfLeague)
                {
                    <a class="btn btn-sm btn-primary margin-top-5" title="Add Members" href="@Url.Content("~/boutchallenge/add/request")">
                        <i class="fa fa-plus-circle"></i> Request
                    </a>
                }
            </div>
        </div>
        <span class="text-muted"> Game Challenges are a way for your league to connect with another league around the world.
            By adding a Game Challenge request, your asking other leagues to come bout with you on a certain weekend.
            Each request should be closed when the challenge has been accepted.  Requests are shown to every league within @RDN.Library.Classes.Config.LibraryConfig.WebsiteShortName.</span>
    </div>
    <div class="panel-body scroll-x">
        <table class="table table-striped table-hover table-condensed no-margin-bottom table-responsive" id="boutRequest">
            <thead>
                <tr>
                    <th></th>
                    <th>
                        League
                    </th>
                    <th>Location</th>
                    <th>
                        Date of Game
                    </th>
                    <th>
                        Travel Stipend
                    </th>
                    <th>Crowd Size</th>
                    <th>
                        Rule Set
                    </th>
                    <th>Contact</th>
                </tr>
            </thead>
            <tbody>

                @foreach (var b in Model)
                {
                    <tr class="@(b.ChallengeId % 2 == 0 ? "tr1" : "tr0")">
                        <td>
                            @if (isAdminOfLeague && leagueId == b.LeagueId)
                            {
                                <a class="btn btn-xs btn-success" href="@Url.Content("~/boutchallenge/edit/" + b.ChallengeId + "/" + b.LeagueId.ToString().Replace("-", ""))"><i class="fa fa-pencil"></i> Edit </a> <a class="btn btn-xs btn-info" href="@Url.Content("~/boutchallenge/view/" + b.ChallengeId + "/" + b.LeagueId.ToString().Replace("-", ""))"><i class="fa fa-eye"></i> View</a>
                            }
                            else
                            {
                                <a class="btn btn-xs btn-info" href="@Url.Content("~/boutchallenge/view/" + b.ChallengeId + "/" + b.LeagueId.ToString().Replace("-", ""))"><i class="fa fa-eye"></i> View</a>
                            }
                        </td>

                        <td>
                            <span class="vmTeamName">
                                <a href="@Url.Content(RDN.Library.Classes.Config.LibraryConfig.PublicSite  + RDN.Portable.Classes.Url.UrlManager.PublicSite_FOR_LEAGUES + RDN.Utilities.Strings.StringExt.ToSearchEngineFriendly(b.LeagueName) + "/" + b.LeagueId.ToString().Replace("-", ""))">
                                    @b.LeagueName
                                </a>
                            </span>
                        </td>
                        <td>@b.Location</td>
                        <td>
                            @if (b.StartDateOfEvent > new DateTime())
                            {
                                @b.StartDateOfEvent.ToShortDateString()
                            }
                        @if (b.EndDateOfEvent > new DateTime())
                        {
                            <span>-</span> @b.EndDateOfEvent.ToShortDateString()
                        }
                    </td>
                    <td>
                        @b.TravelStipendAmount
                    </td>
                    <td>
                        @b.CrowdSize
                    </td>
                    <td>
                        @RDN.Utilities.Enums.EnumExt.ToFreindlyName((RDN.Portable.Classes.Federation.Enums.RuleSetsUsedEnum)b.RuleSetId)
                    </td>
                    <td>
                        <a class="btn btn-xs btn-warning" href="@Url.Content("~/messages/new/league/" + b.LeagueId.ToString().Replace("-", ""))" title="Contact">
                            <i class="fa fa-mobile-phone"></i> Contact
                        </a>
                    </td>
                </tr>
                }
            </tbody>

        </table>
    </div>
</div>

