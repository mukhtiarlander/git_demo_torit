@model RDN.Library.Classes.Payment.Classes.Display.OverviewMerchant
@{
    ViewBag.Title = "Merchant Settings";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<ol class="breadcrumb">
    <li><a href="@RDN.Library.Classes.Config.LibraryConfig.InternalSite">Home</a></li>
    <li><a href="@Url.Content("~/paywall/all/")">Paywalls</a></li>
    <li class="active">Merchant Settings</li>
</ol>


<div class="row">
    <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3">
        <div class="panel panel-default">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-12 col-md-8">
                        <h3 class="margin-top-5">Modify Merchant Settings</h3>
                    </div>
                    @if (!String.IsNullOrEmpty(Model.ReturnUrl))
                    {
                        <div class="col-xs-12 col-md-4 text-right">
                            <a class="btn btn-default btn-sm" href="@Model.ReturnUrl"><i class="fa fa-arrow-circle-left"></i> Back</a>
                        </div>
                    }
                </div>
                <span class="text-muted">Here you can modify the settings.</span>
            </div>
            @using (Html.BeginForm("MerchantSettings", "Merchant", FormMethod.Post, new { @id = "Settings" }))
            {
                <div class="panel-body">
                    <label class="form-label">
                        Notifications Email
                    </label>
                    <div class="margin-bottom-15">
                        @Html.TextBoxFor(x => x.OrderPayedNotificationEmail, new { @class="form-control margin-bottom-5"})
                        <span class="i text-muted">Used for any store notifications.</span>
                    </div>
                    @if (!Model.AcceptPaymentsViaStripe)
                    {
                        <label class="form-label">
                            Accept Credit Card Payments
                        </label>
                       <div class="margin-bottom-15">
                                <a class="btn btn-default btn-xs" href="@ViewBag.StripeUrl">
                                    <i class="fa fa-link"></i>
                                </a>
                                <span class="i">Our Payment Processor, They will collect the money as well as pay you.</span>
                           </div>
                    }
                    else
                    {
                        <label class="form-label">
                            Stripe
                        </label>
                         <div class="margin-bottom-15">
                                <i class="fa fa-check"></i>
                                <span class="i">Your <a href="https://stripe.com/" target="_blank">Stripe</a> Account is Connected.</span>
                        </div>
                    }
                    <label class="form-label">
                        Accept <span class="paypalText">Paypal</span> Payments
                    </label>
                    <div class="margin-bottom-15">
                        @Html.CheckBoxFor(x => x.AcceptPaymentsViaPaypal)
                        <span class="i">Collect Payments Via Paypal</span>
                    </div>
                    <label class="form-label">
                        Your <span class="paypalText">Paypal</span> Email Address
                    </label>
                    <div class="margin-bottom-15">
                        @Html.TextBoxFor(x => x.PaypalEmail, new { @class="form-control margin-bottom-5"})
                        <span class="i text-muted">Email Address To Send Payments To</span>
                    </div>
                </div>
                <div class="panel-footer">
                    <button class="btn btn-success btn-sm" type="submit" ><i class="fa fa-save"></i> Update Settings</button>
                    @if (!String.IsNullOrEmpty(Model.ReturnUrl))
                    {
                        <a class="btn btn-default" href="@Model.ReturnUrl">Cancel</a>
                    }
                </div>
                @Html.HiddenFor(x => x.PrivateManagerId)
                @Html.HiddenFor(x => x.MerchantId)
                @Html.HiddenFor(x => x.InternalReference)
            }
        </div>
    </div>
</div>
                
<script type="text/javascript">

    $("#Settings").validate({
        rules: {
            OrderPayedNotificationEmail: {
                required: true,
                email: true
            }
        }
    });
</script>
